{{template "base" .}}

{{define "content"}}
      </div>
      <h1>Make an Appointment</h1>
      <form id="appointment_form" method="POST" action="./mail.php">
      <div class="form-row">
        <div class="col">
        <div class="form-group">
          <label for="name">First Name</label>
          <input type="text" class="form-control" id="name" name="firstname" placeholder="Enter your name here">
        </div>
      </div>
      <div class="col">
        <div class="form-group">
          <label for="name">Last Name</label>
          <input type="text" class="form-control" id="name" name="lastname" placeholder="Enter your name here">
        </div>
      </div>
    </div>
      <div class="form-group">
        <label for="emailaddress">Email address</label>
        <input type="email" required class="form-control" id="emailaddress" name="emailaddress" placeholder="name@example.com">
      </div>
      <div class="form-group">
        <label for="phonenumber">Phone number</label>
        <input type="tel" required class="form-control" id="phonenumber" name="phonenumber" placeholder="999-999-9999">
      </div>
      <div class="form-group">
        <label for="date">Date for appointment</label>
        <label for="appointment_date"></label><input required class="form-control" type="date" name="appointment_date" id="appointment_date">
    </div>
      <div class="form-group">
        <label for="situation">Describe the situation</label>
        <textarea required class="form-control" id="situation" name="situation" rows="3"></textarea>
      </div>
      <div class="form-group">
      <label for ="submit">
        <input type="submit" class="btn btn-primary" value="Submit"/>
        <!--<button type="submit" class="btn btn-primary">Submit</button>!-->
      </label>
      </div>
    </form>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.2.0/dist/js/datepicker-full.min.js"></script>
    <script src="https://unpkg.com/notie"></script>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script>
      (function() {
    'use strict';
    window.addEventListener('load', function() {
      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      let forms = document.getElementsByClassName('needs-validation');
      // Loop over them and prevent submission
      Array.prototype.filter.call(forms, function(form) {
        form.addEventListener('submit', function(event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    }, false);
  })();

      /*document.getElementById("submitted").addEventListener("click", function(){
        notify("Your appointment has been submitted!", "success") //i should put this in a fxn
      })*/

      function successful(e) {
        e.preventDefault();
        notify('Your appointment has been submitted!', 'success');
      }

      const form = document.querySelector('#appointment_form'); // or use getElementById, or anything else
      form.addEventListener('submit', successful);//how to not have the pop up show until all rq fields are filled out:
      //add an id name to the form, in this case appointment_form



      function notify(msg, msgType) {
        notie.alert({
          type: msgType, // optional, default = 4, enum: [1, 2, 3, 4, 5, 'success', 'warning', 'error', 'info', 'neutral']
          text: msg,
        })
      }

      /*function sendEmail() {
        Email.send({
          Host : "smtp.gmail.com",
          Username : "username",
          Password : "password",
          To : 'them@website.com',
          From : "meganjen12345@gmail.com",
          Subject : "This is the subject",
          Body : "And this is the body"
        }).then(
                message => alert(message)
        );
      }*/
  </script>
{{end}}